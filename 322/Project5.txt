Script started on Thu 08 May 2014 08:42:29 AM PDT
$ 
$ ^[[A    cat project5.c
/*Rosanne Rogel
Comp 322 -Project 5*/

#include <stdio.h>
#include <dirent.h> /* for closedir/opendir/readdir/rewinddir*/
#include <sys/types.h> /*for opendir's "const char" variable*/
#include <string.h>
#include <unistd.h>

char **GetAllDir (const char *path);
static char **Sub = NULL;
int i=0, r=0, indent=0;

int main (int argc, char *argv[])
{
   if (argc != 2){
      fprintf(stderr,"Usage: %s path\n", argv[0]);
      return(1);
   }
   else 
      GetAllDir(argv[1]);
   return 0;
}

char **GetAllDir(const char *path)
{
   DIR *dir = opendir(path); /*open any UNIX directory*/
   struct dirent *dp; /*returned from readdir()*/
   const char *subdir;
 

   if (dir == NULL){
      printf("dir is Null\n");
      return NULL;    /* opendir() failed*/
   }
/*Pass 1: Print subdirectories in directory*/
   while(dir != NULL){     
      if((dp = readdir(dir)) == NULL){  /* reads each directory entry and checks if empty*/
         indent = i;
         i = i-r;
         if(i < 0)
            i=0;
         break;
      }
      
      subdir = dp->d_name;
      
      if (dp->d_type & DT_DIR){ /*check directory to see if its a subdirectory*/
      /*Checks see if its a subdirectory & helps with not printing "." or ".."*/
         if (strcmp (subdir, "..") != 0 && strcmp (subdir, ".") != 0){
            char pathSub[1024];
            i++; indent = i;
            /*for(; indent > 1; indent --) //Indents so that we can see the hiearchy
               printf("\t");*/
            snprintf (pathSub, 1024,"%s/%s", path, subdir); /*sets pathSub=new sub-dir path*/
            printf("%s\n", subdir); //ommitted "%d", i so that program will sort correctly
            GetAllDir(pathSub); /*recurcively calls GetAllDir and goes to Next dir*/
         }
      }
   }
   
   closedir(dir);
   r= r+2;
   return 0;
}
$ 
$ gcc project5.c
$ 
$ / ./a.out /home/users1/script      rsr48631/322>test.txt^[[D^[[D        
$ 
$ cat test.txt
subfolder1
Monkey1
dog
Monkey
CAT
subfolder2
Butterfly
$ 
$ sort test.txt>sort.txt
$ 
$ ls -lR|| grep '^d'|awk '{print$9}'>scripttest.c txt
$ 
$ sort scripttest.txt>sort2.txt
$ 
$ diff -q sort.txt sort2.txt
$ 
$ diff -y sort.txt sort2.txt
Butterfly							Butterfly
CAT								CAT
dog								dog
Monkey								Monkey
Monkey1								Monkey1
subfolder1							subfolder1
subfolder2							subfolder2
$ 
$ 
$ 
$ 

Script done on Thu 08 May 2014 08:46:56 AM PDT
